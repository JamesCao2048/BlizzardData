Introduce Unknown Type to class causes Null pointer exception
Introduce method with an unknown type as an arguement as follows:
class A {}
public abstract aspect B
{
public void A.someMethod(WCharType a) { //blah }
}
WCharType is an unknown type or is forgotten to be imported (in my case).
This shall cause ajc to puke the following:
java.lang.NullPointerException
at
org.aspectj.ajdt.internal.compiler.ast.InterTypeMethodDeclaration.build(InterTypeMethodDeclaration
.java:87)
at
org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.buildInterTypeAndPerClause(AspectDeclarat
ion.java:744)
at
org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.buildInterTypeAndPerClause(AjLookupE
nvironment.java:206)
at
org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindings(AjLookupEnviron
ment.java:94)
at
org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.java:310)
at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:324)
at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:373)
at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:125)
at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:70)
at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:99)
at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)
at org.aspectj.tools.ajc.Main.run(Main.java:217)
at org.aspectj.tools.ajc.Main.runMain(Main.java:155)
at org.aspectj.tools.ajc.Main.main(Main.java:72)
/home/czhang/eclipse/workspace/lib/libajob/org/omg/PortableServer/portable/Delegate.java:0
Internal compiler error
java.lang.NullPointerException
at
org.aspectj.ajdt.internal.compiler.ast.InterTypeMethodDeclaration.build(InterTypeMethodDeclaration
.java:87)
at
org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.buildInterTypeAndPerClause(AspectDeclarat
ion.java:744)
at
org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.buildInterTypeAndPerClause(AjLookupE
nvironment.java:206)
at
org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindings(AjLookupEnviron
ment.java:94)
at
org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.java:310)
at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:324)
at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:373)
at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:125)
at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:70)
at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:99)
at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)
at org.aspectj.tools.ajc.Main.run(Main.java:217)
at org.aspectj.tools.ajc.Main.runMain(Main.java:155)
at org.aspectj.tools.ajc.Main.main(Main.java:72)


!! no source information available !!
!! no source information available !!
ABORT
Exception thrown from AspectJ 1.1.1

This might be logged as a bug already -- find current bugs at
http://bugs.eclipse.org/bugs/buglist.cgi?product=AspectJ&component=Compiler

Bugs for exceptions thrown have titles File:line from the top stack,
e.g., "SomeFile.java:243"

If you don't find the exception below in a bug, please add a new bug
at  http://bugs.eclipse.org/bugs/enter_bug.cgi?product=AspectJ
To make the bug a priority, please include a test program
that can reproduce this exception.
null
java.lang.NullPointerException
at
org.aspectj.ajdt.internal.compiler.ast.InterTypeMethodDeclaration.build(InterTypeMethodDeclaration
.java:87)
at
org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.buildInterTypeAndPerClause(AspectDeclarat
ion.java:744)
at
org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.buildInterTypeAndPerClause(AjLookupE
nvironment.java:206)
at
org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindings(AjLookupEnviron
ment.java:94)
at
org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.java:310)
at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:324)
at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:373)
at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:125)
at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:70)
at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:99)
at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)
at org.aspectj.tools.ajc.Main.run(Main.java:217)
at org.aspectj.tools.ajc.Main.runMain(Main.java:155)
at org.aspectj.tools.ajc.Main.main(Main.java:72)


1 fail|abort, 1 error