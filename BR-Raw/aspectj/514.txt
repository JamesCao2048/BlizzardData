inter-type declarations cause JRockit Crash
BEA's JRockit JVM (version:
8.1sp2-1.4.1_05-Load10-viking-win32-sthqa29-20031105-1554) crashes on simple
inter-type declarations. (Obviously I have also submitted this bug to BEA, but
the AJ team may be able to shed some light on what is going on and where (if
anywhere) BEA's JVM is behaving wrong.)
The cannonical example lies below:
public class SimpleClass {
public static void main(String[] args) {
SimpleClass simple = new SimpleClass();
}
}
public aspect SimpleAspect {
public int SimpleClass.foo;
}
When running SimpleClass I get a JVM crash with the following thread stack trace.
Thread Stack Trace:
at _exprPush+112 ()@0082FF70
at COM.jrockit.vm.RNI.toNative(Native Method)@32520000
at COM.jrockit.vm.RNI.clinitTrampoline(Native Method)@325200FA
at com.vms.adbase.jvmcrashtest.SimpleClass.<init>(SimpleClass.java:4)@344B0055
at com.vms.adbase.jvmcrashtest.SimpleClass.main(SimpleClass.java:6)@344B0034
--- End of stack trace
Feel free to ask me for further details. JRockit can be downloaded at:
http://commerce.bea.com/showallversions.jsp?family=WLJR . I reproduced this error
on Windows XP, but it also happend on RedHat.
Is it worth adding JRockit to AspectJ's compatibility test suite?