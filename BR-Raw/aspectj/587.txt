super call in intertype method declaration body causes VerifyError
AspectJ Compiler 1.1beta4
This program:
aspect Foo {
void A.foo() { }
void B.foo() { super.foo(); }
}
class A { }
class B extends A { }
class Main {
public static void main(String[] args) {
new B();
}
}
causes this error at runtime:
Exception in thread "main" java.lang.VerifyError: (class: B, method: ajc$superDispatch$B$foo signature: ()V) Illegal use of nonvirtual function call
at Main.main(Foo.java:11)
Note that foo is never even called; the error happens at load time when the new B() expression causes class B to be loaded.  There's no error if either one of the foo methods is declared in its class directly.
This is kind of a showstopper...
--Doug