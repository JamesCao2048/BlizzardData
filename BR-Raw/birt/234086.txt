Bug 234086 Preview failed if dataset parameter refer to a report parameter with default value
Description: Preview failed if dataset paramter refer to a report parameter with default value Build number: 2.3.0.v20080527-1201 Steps to reproduce: 1, New a dataset and set the Query text to: select * from CUSTOMERS where CUSTOMERNUMBER<?
2, Link the dataset parameter value to a report parameter and set the default value of report parameter to 160 3, Preview in dataset Expected result: The preview should work and CUSTOMERNUMBER in result set are less than 160 Actual result: Exception throws out Error log: org.eclipse.birt.data.engine.core.DataException: Data engine operation failed due to an unexpected exception.
Error evaluating Javascript expression.
Script engine error: Report parameter "a" does not exist.
Script source:
<inline>, line: 0, text: params["a"] at org.eclipse.birt.data.engine.impl.ParameterUtil.evaluateInputParameterValue(ParameterUtil.java:316) at org.eclipse.birt.data.engine.impl.ParameterUtil.resolveParameterBinding(ParameterUtil.java:224) at org.eclipse.birt.data.engine.impl.ParameterUtil.resolveParameterBindings(ParameterUtil.java:186) at org.eclipse.birt.data.engine.impl.ParameterUtil.resolveDataSetParameters(ParameterUtil.java:152) at org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.configureDataSetCache(PreparedDataSourceQuery.java:236) at org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:170) at org.eclipse.birt.data.engine.impl.PreparedOdaDSQuery.execute(PreparedOdaDSQuery.java:143) at org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:158) at org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:141) at org.eclipse.birt.report.data.adapter.im
pl.QueryExecutionHelper.executeQuery(QueryExecutionHelper.java:127) at org.eclipse.birt.report.data.adapter.impl.QueryExecutionHelper.executeQuery(QueryExecutionHelper.java:109) at org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.executeQuery(DataRequestSessionImpl.java:296) at org.eclipse.birt.report.designer.data.ui.util.DataSetProvider.executeQuery(DataSetProvider.java:571) at org.eclipse.birt.report.designer.data.ui.util.DataSetProvider.execute(DataSetProvider.java:458) at org.eclipse.birt.report.designer.data.ui.dataset.ResultSetPreviewPage.executeProcess(ResultSetPreviewPage.java:393) at org.eclipse.birt.report.designer.data.ui.dataset.ResultSetPreviewPage.runUpdateResults(ResultSetPreviewPage.java:293) at org.eclipse.birt.report.designer.data.ui.dataset.ResultSetPreviewPage.access$1(ResultSetPreviewPage.java:259) at org.eclipse.birt.report.designer.data.ui.dataset.ResultSetPreviewPage$4.runInUIThread(ResultSetPreviewPage.java:252)