Bug 163732 [regression] TPTP reports can not be generated using XML datasource
I get a DataException when trying to generate a report that is bindeded to an xml stream. I tried the following BIRT driver: 2.2.0-N20061106. This is a blocker for TPTP since all BIRT reports cannot be generated. The tptp reports are generated within an ecilpse tool that generates a XML stream. This XML stream is passed to the report via a context map as shown in the following code snippet. HashMap contextMap = new HashMap(); contextMap.put(EngineConstants.APPCONTEXT_HTML_RENDER_CONTEXT, renderContext); contextMap.put(Constants.APPCONTEXT_INPUTSTREAM , xmlInput); contextMap.put(Constants.APPCONTEXT_CLOSEINPUTSTREAM , "true"); IReportRunnable report = null; try { report = engine.openReportDesign(templateFile); report.getDesignHandle().getModule().getSession().setResourceLocator(resourceLocator); } catch (EngineException e) { engine.destroy(); throw e; } IRunAndRenderTask task = engine.createRunAndRenderTask(report); task.setAppContext(contextMap); The above code worked in 2.1.1. It seem
s something has changed. I should also mention that the template files do refer to a xml file on my d drive. However I was under the impression that if I specify a XML stream at runtime this XML stream would be first considered as the datasource before BIRT tries to open up the file specified in the report template. I get the following error. + Cannot open the connection for the driver: org.eclipse.datatools.enablement.oda.xml unknown protocol: d odaconsumer.CannotOpenConnection ( 2 time(s) ) detail : org.eclipse.birt.data.engine.core.DataException: Cannot open the connection for the driver: org.eclipse.datatools.enablement.oda.xmlunknown protocol: d at org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection(ConnectionManager.java:148) at org.eclipse.birt.data.engine.executor.DataSource.newConnection(DataSource.java:133) at org.eclipse.birt.data.engine.executor.DataSource.open(DataSource.java:121) at org.eclipse.birt.data.engine.impl.DataSourceRuntime.openOdiDataSourc
e(DataSourceRuntime.java:206) at org.eclipse.birt.data.engine.impl.QueryExecutor.openDataSource(QueryExecutor.java:257) at org.eclipse.birt.data.engine.impl.QueryExecutor.prepareExecution(QueryExecutor.java:202) at org.eclipse.birt.data.engine.impl.PreparedQuery.doPrepare(PreparedQuery.java:396) at org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:145) at org.eclipse.birt.data.engine.impl.PreparedOdaDSQuery.execute(PreparedOdaDSQuery.java:134) at org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:125) at org.eclipse.birt.report.engine.data.dte.DteDataEngine.doExecuteQuery(DteDataEngine.java:120) at org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.execute(AbstractDataEngine.java:146) at org.eclipse.birt.report.engine.executor.ExecutionContext.executeQuery(ExecutionContext.java:1647) at org.eclipse.birt.report.engine.executor.QueryItemExecutor.executeQuery(QueryItemExecutor.java:62) at or