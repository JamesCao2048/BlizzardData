Bug 107961 NullPointerException is thrown out when dragging a data set from data explorer view into layout view in an old design file.
Description: NullPointerException is thrown out when double click on a data set in an old design file. Steps to reproduce: 1. Open attached design file. 2. Drag "DSet_Oracle" from data explorer view into layout view. Actual result: NPE is thrown out. java.lang.NullPointerException at org.eclipse.birt.report.data.oda.jdbc.Connection.newQuery (Connection.java:90) at org.eclipse.birt.data.engine.odaconsumer.manager.OdaConnection.newQuery (OdaConnection.java:464) at org.eclipse.birt.data.engine.odaconsumer.Connection.prepareOdaQuery (Connection.java:217) at org.eclipse.birt.data.engine.odaconsumer.Connection.prepareStatement (Connection.java:155) at org.eclipse.birt.data.engine.executor.DataSource.prepareStatement (DataSource.java:187) at org.eclipse.birt.data.engine.executor.DataSourceQuery.prepare (DataSourceQuery.java:290) at org.eclipse.birt.data.engine.impl.PreparedExtendedDSQuery$ExtendedDSQueryExecut or.prepareOdiQuery(PreparedExtendedDSQuery.java:253) at org.eclipse.birt.data.engin
e.impl.PreparedQuery$Executor.prepareExecution (PreparedQuery.java:493) at org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.access$000 (PreparedQuery.java:382) at org.eclipse.birt.data.engine.impl.PreparedQuery.doPrepare (PreparedQuery.java:167) at org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute (PreparedDataSourceQuery.java:137) at org.eclipse.birt.report.designer.internal.ui.util.DataSetManager.execute (DataSetManager.java:239) at org.eclipse.birt.report.designer.internal.ui.util.DataSetManager.getColumns (DataSetManager.java:191) at org.eclipse.birt.report.designer.internal.ui.util.DataSetManager.getColumns (DataSetManager.java:132) at org.eclipse.birt.report.designer.internal.ui.dnd.InsertInLayoutUtil.performInse rtDataSet(InsertInLayoutUtil.java:599) at org.eclipse.birt.report.designer.internal.ui.dnd.InsertInLayoutUtil.performInse rt(InsertInLayoutUtil.java:391) at org.eclipse.birt.report.designer.internal.ui.dnd.InsertInLayoutUtil.performMult iInsert(In
sertInLayoutUtil.java:485) at org.eclipse.birt.report.designer.internal.ui.dnd.InsertInLayoutUtil.performInse rt(InsertInLayoutUtil.java:410) at org.eclipse.birt.report.designer.internal.ui.dnd.InsertInLayoutUtil.performInse rt(InsertInLayoutUtil.java:441) at org.eclipse.birt.report.designer.internal.ui.palette.BasePaletteFactory$DataSet ToolExtends.preHandleMouseUp(BasePaletteFactory.java:532) at org.eclipse.birt.report.designer.internal.ui.palette.ReportTemplateTransferDrop TargetListener.handleDrop(ReportTemplateTransferDropTargetListener.java:176) at org.eclipse.gef.dnd.AbstractTransferDropTargetListener.drop (AbstractTransferDropTargetListener.java:170) at org.eclipse.jface.util.DelegatingDropAdapter$3.run (DelegatingDropAdapter.java:211) at org.eclipse.core.internal.runtime.InternalPlatform.run (InternalPlatform.java:1044) at org.eclipse.core.runtime.Platform.run(Platform.java:783) at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44) at org.eclipse.jface.util.SafeRunna