Bug 264836 clone() method of org.eclipse.birt.report.model.metadata.ChoiceSet
Problem with clone() method of org.eclipse.birt.report.model.metadata.ChoiceSet.
This method is adding values from ArrayList to the same ArrayList instance (attribute choices).
Size of this ArrayList goes to infinity (OutOfMemory).
/////////// CURRENT ChoiceSet CODE //////////////////// public Object clone( ) throws CloneNotSupportedException { ChoiceSet set = (ChoiceSet) super.clone( ); if ( choices != null ) { for ( int i = 0; i
< choices.size( ); i++ ) set.choices.add( ( (IChoice) choices.get( i ) ).copy( ) ); } return set; } ////////////////////////////////////////////////////// /////////// ChoiceSet FIX //////////////////// public Object clone( ) throws CloneNotSupportedException { ChoiceSet set = (ChoiceSet) super.clone( ); // new instance of cloned ChoiceSet choices set.choices = new ArrayList(); if ( choices != null ) { for ( int i = 0; i
< choices.size( ); i++ ) set.choices.add( ( (IChoice) choices.get( i ) ).copy( ) ); } return set; } //////////////////////////////////////////////////////