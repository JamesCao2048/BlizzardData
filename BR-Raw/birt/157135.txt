Bug 157135 Use source from library error in a special condition
Description: Set the preferences->Report Design->Resource Fold as its default value(blank).Drag a something from library to a report which is in a subfold of a project.It will get an error. Step to reproduce: 1. go to preferences->Report Design->Resource, in that page click the "Restore Defaults" 2. New a report project 3. New a fold in the new project(a yellow fold) 4. New a library in the project and new a datasource in the library 5. New a report "New_report1.rptdesign" under the project fold(the blue one) 6. New another report "New_report2.rptdesign" under the subfold of the project (the yellow fold) 7. Drag the datasource frow the new library to this two report. Actual result: drag to the New_report1.rptdesign is ok, but to the "New_report2.rptdesign" will get an error Error log: Error.DesignFileException.SYNTAX_ERROR - 1 errors found! 1.) org.eclipse.birt.report.model.parser.DesignParserException (code = Error.DesignParserException.FILE_NOT_FOUND, message : The file "new_library_
4.rptlibrary" is not found.) at org.eclipse.birt.report.model.core.Module.loadLibrary(Module.java:1528) at org.eclipse.birt.report.model.command.LibraryCommand.doAddLibrary(LibraryCommand.java:465) at org.eclipse.birt.report.model.command.LibraryCommand.addLibrary(LibraryCommand.java:122) at org.eclipse.birt.report.model.api.ModuleHandle.includeLibrary(ModuleHandle.java:1936) at org.eclipse.birt.report.designer.internal.ui.util.UIUtil.includeLibrary(UIUtil.java:1099) at org.eclipse.birt.report.designer.internal.ui.util.UIUtil.includeLibrary(UIUtil.java:1151) at org.eclipse.birt.report.designer.internal.ui.views.outline.dnd.DesignerDropListener.copyData(DesignerDropListener.java:223) at org.eclipse.birt.report.designer.internal.ui.dnd.DesignElementDropAdapter.performDrop(DesignElementDropAdapter.java:102) at org.eclipse.birt.report.designer.internal.ui.views.outline.dnd.DesignerDropListener.performDrop(DesignerDropListener.java:139) at org.eclipse.jface.viewers.ViewerDropAdapter.drop(Vi
ewerDropAdapter.java:233) at org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:952) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:937) at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:709) at org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:423) at org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:238) at org.eclipse.swt.internal.ole.win32.COMObject.callback6(COMObject.java:117) at org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method) at org.eclipse.swt.dnd.DragSource.drag(DragSource.java:306) at org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:277) at org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:164) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.jav