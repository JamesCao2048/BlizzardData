ScrollBar SelectionEvent detail field not being set correctly at end of a drag
I have the same problem that was reported in  bug 104779  a few years ago.
The SelectionEvents generated by the ScrollBar widget sometimes do not have SWT.NONE set in the detail field of the event at the end of dragging (especially if I release the mouse button while still dragging).
I had a look into the source code (ScrollBar.java) and found something that has not been changed since revision 1.61 (which was the commit for  bug 104779 ) and it looks like this never could have worked:
The "detail" field in ScrollBar (which is not the same as in the event) is set to gtk constant values (e.g.
OS.GTK_SCROLL_JUMP) but is later checked against SWT.DRAG.
Also the "detail" field is always cleared after the switch statement in gtk_value_changed() (in addition to the next line where it is cleared when the "detail" field is != OS.GTK_SCROLL_JUMP), so the check in gtk_event_after will never trigger.
I've attached a patch which fixes the problem for me.