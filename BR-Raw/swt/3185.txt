Eclipse fails to load oldstyle BMP files
I have several old style BMP files.
When I attempt to load them into an image
eclipse runs out of memory.
The problem appears to be that the
WinBMPFileFormat class does not check the header of the file correctly before
reading the image.
In my case, I have a BMP file with the following header:
0x42 0x4d 0xca 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x4a 0x00 0x00 0x00 0xC0 0x00
0x00 0x00 0x10 0x00 0x10 0x00 0x01 0x00 0x04 0x00
Notice the 0x0c at offset 14.This indicates that the Bitmap info header is
only 12 bytes long and not the 42 that is being assumed.
This conforms to the
BITMAPCOREHEADER.
According to microsoft the information starting at offset 14
is either a BITMAPINFO or a BITMAPCOREINFO.
The only way to tell the
difference is to check the size.
see:
http://msdn.microsoft.com/library/default.asp?url=/library/en
-
us/gdi/bitmaps_7jaq.asp